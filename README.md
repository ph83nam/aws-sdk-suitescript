# AWS SDK for SuiteScript

[Documentation](https://aws.amazon.com/documentation/sdk-for-javascript/) and [source code](https://github.com/aws/aws-sdk-js) by AWS

More information about [Suite Script](http://www.netsuite.com/portal/developers/resources/suitescript.shtml)

## Build

Clone the repository from GitHub  

```sh
git clone git://github.com/icarebenefits/aws-sdk-suitescript
cd aws-sdk-suitescript
```

After you clone the repository, download the dependency modules for both the SDK and build tool:

```sh
npm install
```

### Suite Script 1.x library

For all AWS services

```sh
SUITESCRIPT_VERSION=1x node dist-tools/ss-builder.js 1> aws-sdk.js
```

For specific service(s)

```sh
SUITESCRIPT_VERSION=1x node dist-tools/ss-builder.js s3,sqs 1> aws-s3-sqs.js
```

### Suite Script 2.x module

Use similar syntax without `SUITESCRIPT_VERSION` environment variable or set to `2x` (default).

## Usage and Debug

### In Suite Script 1.x

With AWS library included, create service object:

```javascript

var context = nlapiGetContext();
var options = {
   region: context.getSetting('SCRIPT', 'custscript_aws_region'),
   accessKeyId: context.getSetting('SCRIPT', 'custscript_aws_access_key_id'),
   secretAccessKey: context.getSetting('SCRIPT', 'custscript_aws_secret_key'),
};

// create service object
var sqs = new AWS.SQS(options);

```

### In Suite Script 2.x

Create service object

```javascript
define(['SuiteScripts/aws-sdk', 'N/runtime'], function (AWS, runtime) {
  ...
  // read configuration
  var script = runtime.getCurrentScript();
  var options = {
     region: script.getParameter('custscript_aws_region'),
     accessKeyId: script.getParameter('custscript_aws_access_key_id'),
     secretAccessKey: script.getParameter('custscript_aws_secret_key'),
  };
  
  // create service object
  var sqs = new AWS.SQS(options);
  ...
});
```

### Debug

TBD

### Known Limitations
There are a few known limitations related to Suite Script 
 * HttpClient module has no asynchronous mode, so callback function (as argument) always gets called before service invocation returns.
 * There is nothing similar to `setTimeout()` so no pause after retriable error.
 * Browser will hang if you try to use Suite Script online debugger with big files like those generated by `dist-tools`.

## License

This SDK is distributed under the
[Apache License, Version 2.0](http://www.apache.org/licenses/LICENSE-2.0),
see LICENSE.txt and NOTICE.txt for more information.
